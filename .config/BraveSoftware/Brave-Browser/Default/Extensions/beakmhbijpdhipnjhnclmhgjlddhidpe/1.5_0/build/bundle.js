var linkding=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function f(){return u(" ")}function d(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t){return function(e){return e.preventDefault(),t.call(this,e)}}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function g(t,e){t.value=null==e?"":e}function v(t,e,n){t.classList[n?"add":"remove"](e)}let b;function k(t){b=t}const y=[],$=[],x=[],w=[],T=Promise.resolve();let C=!1;function _(t){x.push(t)}let j=!1;const U=new Set;function A(){if(!j){j=!0;do{for(let t=0;t<y.length;t+=1){const e=y[t];k(e),E(e.$$)}for(k(null),y.length=0;$.length;)$.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];U.has(e)||(U.add(e),e())}x.length=0}while(y.length);for(;w.length;)w.pop()();C=!1,j=!1,U.clear()}}function E(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const L=new Set;let B;function P(t,e){t&&t.i&&(L.delete(t),t.i(e))}function S(t,e,n,o){if(t&&t.o){if(L.has(t))return;L.add(t),B.c.push((()=>{L.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function O(t){t&&t.c()}function M(t,n,a){const{fragment:i,on_mount:r,on_destroy:l,after_update:c}=t.$$;i&&i.m(n,a),_((()=>{const n=r.map(e).filter(s);l?l.push(...n):o(n),t.$$.on_mount=[]})),c.forEach(_)}function N(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function I(t,e){-1===t.$$.dirty[0]&&(y.push(t),C||(C=!0,T.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(e,s,a,i,r,c,u=[-1]){const f=b;k(e);const d=s.props||{},m=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:u,skip_bound:!1};let p=!1;if(m.ctx=a?a(e,d,((t,n,...o)=>{const s=o.length?o[0]:n;return m.ctx&&r(m.ctx[t],m.ctx[t]=s)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](s),p&&I(e,t)),n})):[],m.update(),p=!0,o(m.before_update),m.fragment=!!i&&i(m.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);m.fragment&&m.fragment.l(t),t.forEach(l)}else m.fragment&&m.fragment.c();s.intro&&P(e.$$.fragment),M(e,s.target,s.anchor),A()}k(f)}class H{$destroy(){N(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function z(t){const e=t.value,n=t.selectionStart;let o=n,s=e.charAt(o-1);for(;s&&" "!==s&&o>0;)o--,s=e.charAt(o-1);return{start:o,end:n}}function D(t,e,n){const o=t.slice();return o[19]=e[n],o[21]=n,o}function J(t){let e,n,o,s,a,g,b,k,y=t[19]+"";function $(){return t[14](t[19])}return{c(){e=c("li"),n=c("a"),o=c("div"),s=c("div"),a=u(y),g=f(),p(s,"class","tile-content"),p(o,"class","tile tile-centered"),p(n,"href","#"),p(n,"class","svelte-1xblcwv"),p(e,"class","menu-item svelte-1xblcwv"),v(e,"selected",t[6]===t[21])},m(t,l){r(t,e,l),i(e,n),i(n,o),i(o,s),i(s,a),i(e,g),b||(k=d(n,"mousedown",m($)),b=!0)},p(n,o){t=n,32&o&&y!==(y=t[19]+"")&&h(a,y),64&o&&v(e,"selected",t[6]===t[21])},d(t){t&&l(e),b=!1,k()}}}function q(e){let n,s,a,u,m,h,b,k=e[5],y=[];for(let t=0;t<k.length;t+=1)y[t]=J(D(e,k,t));return{c(){n=c("div"),s=c("div"),a=c("input"),u=f(),m=c("ul");for(let t=0;t<y.length;t+=1)y[t].c();p(a,"id",e[1]),p(a,"name",e[2]),a.autofocus=!0,p(a,"class","form-input input-sm"),p(a,"type","text"),p(a,"autocomplete","off"),p(s,"class","form-autocomplete-input form-input"),v(s,"is-focused",e[3]),p(m,"class","menu svelte-1xblcwv"),v(m,"open",e[4]&&e[5].length>0),p(n,"class","form-autocomplete")},m(t,o){r(t,n,o),i(n,s),i(s,a),g(a,e[0]),i(n,u),i(n,m);for(let t=0;t<y.length;t+=1)y[t].m(m,null);a.focus(),h||(b=[d(a,"input",e[13]),d(a,"input",e[9]),d(a,"keydown",e[10]),d(a,"focus",e[7]),d(a,"blur",e[8])],h=!0)},p(t,[e]){if(2&e&&p(a,"id",t[1]),4&e&&p(a,"name",t[2]),1&e&&a.value!==t[0]&&g(a,t[0]),8&e&&v(s,"is-focused",t[3]),2144&e){let n;for(k=t[5],n=0;n<k.length;n+=1){const o=D(t,k,n);y[n]?y[n].p(o,e):(y[n]=J(o),y[n].c(),y[n].m(m,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=k.length}48&e&&v(m,"open",t[4]&&t[5].length>0)},i:t,o:t,d(t){t&&l(n),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(y,t),h=!1,o(b)}}}function W(t,e,n){let{id:o}=e,{name:s}=e,{value:a}=e,{tags:i}=e,r=!1,l=!1,c=null,u=[],f=0;function d(){n(4,l=!1),n(5,u=[]),n(6,f=0)}function m(t){const e=z(c),o=c.value;n(0,a=o.substring(0,e.start)+t+o.substring(e.end)),d()}function p(t){const e=u.length;let o=f+t;o<0&&(o=Math.max(e-1,0)),o>=e&&(o=0),n(6,f=o)}return t.$$set=t=>{"id"in t&&n(1,o=t.id),"name"in t&&n(2,s=t.name),"value"in t&&n(0,a=t.value),"tags"in t&&n(12,i=t.tags)},[a,o,s,r,l,u,f,function(){n(3,r=!0)},function(){n(3,r=!1),d()},function(t){c=t.target;const e=function(t){const e=z(t);return t.value.substring(e.start,e.end)}(c);n(5,u=e?i.filter((t=>0===t.indexOf(e))):[]),e&&u.length>0?(n(4,l=!0),n(6,f=0)):d()},function(t){if(l&&(13===t.keyCode||9===t.keyCode)){m(u[f]),t.preventDefault()}27===t.keyCode&&(d(),t.preventDefault()),38===t.keyCode&&(p(-1),t.preventDefault()),40===t.keyCode&&(p(1),t.preventDefault())},m,i,function(){a=this.value,n(0,a)},t=>m(t)]}class G extends H{constructor(t){var e;super(),document.getElementById("svelte-1xblcwv-style")||((e=c("style")).id="svelte-1xblcwv-style",e.textContent=".menu.svelte-1xblcwv.svelte-1xblcwv{display:none;max-height:200px;overflow:auto;font-size:.7rem}.menu.open.svelte-1xblcwv.svelte-1xblcwv{display:block}.menu-item.selected.svelte-1xblcwv>a.svelte-1xblcwv{background:#f1f1fc;color:#5755d9}",i(document.head,e)),R(this,t,W,q,a,{id:1,name:2,value:0,tags:12})}}function V(){return"undefined"!=typeof browser?browser:chrome}function Y(){return"undefined"!=typeof chrome&&!!chrome.storage}function F(t){if(Y()){return chrome.storage.local.get([t]).then((e=>e[t]))}return Promise.resolve(localStorage.getItem(t))}function K(t,e){return Y()?chrome.storage.local.set({[t]:e}):(localStorage.setItem(t,e),Promise.resolve())}function Q(){V().runtime.openOptionsPage(),window.close()}const X="ld_ext_config",Z={baseUrl:"",token:"",default_tags:""};async function tt(){const t=await F(X),e=t?JSON.parse(t):{};return{...Z,...e}}function et(t){return t.baseUrl&&t.token}class nt{constructor(t){this.configuration=t}async getBookmark(t){const e=this.configuration;return fetch(`${e.baseUrl}/api/bookmarks/${t}/`,{headers:{Authorization:`Token ${e.token}`}}).then((t=>200===t.status?t.json():Promise.reject(`Error retrieving bookmark: ${t.statusText}`)))}async saveBookmark(t){const e=this.configuration;return fetch(`${e.baseUrl}/api/bookmarks/`,{method:"POST",headers:{Authorization:`Token ${e.token}`,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>201===t.status?t.json():400===t.status?t.json().then((t=>Promise.reject(`Validation error: ${JSON.stringify(t)}`))):Promise.reject(`Request error: ${t.statusText}`)))}async getTags(){const t=this.configuration;return fetch(`${t.baseUrl}/api/tags/?limit=1000`,{headers:{Authorization:`Token ${t.token}`}}).then((t=>200===t.status?t.json().then((t=>t.results)):Promise.reject(`Error loading tags: ${t.statusText}`)))}async search(t,e){const n=this.configuration,o=encodeURIComponent(t),s=e.limit||100;return fetch(`${n.baseUrl}/api/bookmarks/?q=${o}&limit=${s}`,{headers:{Authorization:`Token ${n.token}`}}).then((t=>200===t.status?t.json().then((t=>t.results)):Promise.reject(`Error searching bookmarks: ${t.statusText}`)))}async check(t){const e=this.configuration;return t=encodeURIComponent(t),fetch(`${e.baseUrl}/api/bookmarks/check/?url=${t}`,{headers:{Authorization:`Token ${e.token}`}}).then((t=>200===t.status?t.json():Promise.reject(`Error checking bookmark URL: ${t.statusText}`)))}async testConnection(){const t=this.configuration;return fetch(`${t.baseUrl}/api/bookmarks/?limit=1`,{headers:{Authorization:`Token ${t.token}`}}).then((t=>200===t.status?t.json():Promise.reject(t))).then((t=>!!t.results)).catch((()=>!1))}async findBookmarkByUrl(t){return this.search(t,{limit:1}).then((t=>t&&t.length>0?t[0]:void 0))}}const ot="ld_tab_metadata_cache";async function st(t){const e=await tt();if(!et(e)||!t||!t.match(/^http(s)?:\/\//))return null;const n=await async function(){const t=await F(ot);return t?JSON.parse(t):null}();if(n&&n.metadata.url===t)return n;const o=new nt(e);try{const e=await o.check(t);return e.bookmark&&!e.bookmark.date_added&&(e.bookmark=await o.getBookmark(e.bookmark.id)),await at(e),e}catch(t){return console.error(t),null}}async function at(t){const e=JSON.stringify(t);await K(ot,e)}function it(t){let e;return{c(){e=c("div"),e.textContent="This URL is already bookmarked. The form has been prefilled from the existing bookmark, and saving the form will\n        update the existing bookmark.",p(e,"class","form-input-hint bookmark-exists svelte-af5t2e")},m(t,n){r(t,e,n)},d(t){t&&l(e)}}}function rt(t){let e;return{c(){e=c("div"),e.innerHTML='<div class="form-input-hint"><i class="icon icon-check"></i> Bookmark saved</div>',p(e,"class","form-group has-success result-row svelte-af5t2e")},m(t,n){r(t,e,n)},d(t){t&&l(e)}}}function lt(t){let e,n,o,s;return{c(){e=c("div"),n=c("div"),o=u("Error saving bookmark: "),s=u(t[8]),p(n,"class","form-input-hint"),p(e,"class","form-group has-error result-row svelte-af5t2e")},m(t,a){r(t,e,a),i(e,n),i(n,o),i(n,s)},p(t,e){256&e&&h(s,t[8])},d(t){t&&l(e)}}}function ct(t){let e,n;return{c(){e=c("div"),n=c("button"),n.textContent="Save",p(n,"type","submit"),p(n,"class","btn btn-primary svelte-af5t2e"),v(n,"loading","loading"===t[7]),p(e,"class","button-row svelte-af5t2e")},m(t,o){r(t,e,o),i(e,n)},p(t,e){128&e&&v(n,"loading","loading"===t[7])},d(t){t&&l(e)}}}function ut(t){let e,n,s,a,v,b,k,y,x,T,C,_,j,U,A,E,L,B,I,R,H,z,D,J,q,W,V,Y,F,K,Q,X,Z,tt,et,nt,ot,st,at,ut,ft,dt,mt,pt,ht,gt,vt=t[10]?"Edit Bookmark":"Add bookmark",bt=t[10]&&it();function kt(e){t[16].call(null,e)}let yt={id:"input-tags",name:"tags",tags:t[9]};void 0!==t[5]&&(yt.value=t[5]),I=new G({props:yt}),$.push((()=>function(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}(I,"value",kt)));let $t="success"===t[7]&&rt(),xt="error"===t[7]&&lt(t),wt="success"!==t[7]&&ct(t);return{c(){e=c("div"),n=c("h6"),s=u(vt),a=f(),v=c("a"),v.textContent="Options",b=f(),k=c("div"),y=f(),x=c("form"),T=c("div"),C=c("label"),C.textContent="URL",_=f(),j=c("input"),U=f(),bt&&bt.c(),A=f(),E=c("div"),L=c("label"),L.textContent="Tags",B=f(),O(I.$$.fragment),H=f(),z=c("div"),D=c("label"),D.textContent="Title",J=f(),q=c("input"),W=f(),V=c("div"),Y=c("label"),Y.textContent="Description",F=f(),K=c("textarea"),Q=f(),X=c("div"),Z=c("label"),tt=c("input"),et=f(),nt=c("i"),ot=f(),st=c("span"),st.textContent="Mark as unread",at=f(),ut=c("div"),ft=f(),$t&&$t.c(),dt=f(),xt&&xt.c(),mt=f(),wt&&wt.c(),p(v,"href","#"),p(e,"class","title-row svelte-af5t2e"),p(k,"class","divider"),p(C,"class","form-label label-sm"),p(C,"for","input-url"),p(j,"class","form-input input-sm"),p(j,"type","text"),p(j,"id","input-url"),p(j,"placeholder","URL"),p(T,"class","form-group"),p(L,"class","form-label label-sm"),p(L,"for","input-tags"),p(E,"class","form-group"),p(D,"class","form-label label-sm"),p(D,"for","input-title"),p(q,"class","form-input input-sm"),p(q,"type","text"),p(q,"id","input-title"),p(q,"placeholder",t[2]),p(z,"class","form-group"),p(Y,"class","form-label label-sm"),p(Y,"for","input-description"),p(K,"class","form-input input-sm"),p(K,"id","input-description"),p(K,"placeholder",t[3]),p(V,"class","form-group"),p(tt,"type","checkbox"),p(nt,"class","form-icon"),p(st,"class","text-small"),p(Z,"class","form-checkbox"),p(X,"class","form-group"),p(ut,"class","divider"),p(x,"class","form svelte-af5t2e")},m(o,l){r(o,e,l),i(e,n),i(n,s),i(e,a),i(e,v),r(o,b,l),r(o,k,l),r(o,y,l),r(o,x,l),i(x,T),i(T,C),i(T,_),i(T,j),g(j,t[0]),i(T,U),bt&&bt.m(T,null),i(x,A),i(x,E),i(E,L),i(E,B),M(I,E,null),i(x,H),i(x,z),i(z,D),i(z,J),i(z,q),g(q,t[1]),i(x,W),i(x,V),i(V,Y),i(V,F),i(V,K),g(K,t[4]),i(x,Q),i(x,X),i(X,Z),i(Z,tt),tt.checked=t[6],i(Z,et),i(Z,nt),i(Z,ot),i(Z,st),i(x,at),i(x,ut),i(x,ft),$t&&$t.m(x,null),i(x,dt),xt&&xt.m(x,null),i(x,mt),wt&&wt.m(x,null),pt=!0,ht||(gt=[d(v,"click",m(t[12])),d(j,"input",t[15]),d(q,"input",t[17]),d(K,"input",t[18]),d(tt,"change",t[19]),d(x,"submit",m(t[11]))],ht=!0)},p(t,[e]){(!pt||1024&e)&&vt!==(vt=t[10]?"Edit Bookmark":"Add bookmark")&&h(s,vt),1&e&&j.value!==t[0]&&g(j,t[0]),t[10]?bt||(bt=it(),bt.c(),bt.m(T,null)):bt&&(bt.d(1),bt=null);const n={};var o;512&e&&(n.tags=t[9]),!R&&32&e&&(R=!0,n.value=t[5],o=()=>R=!1,w.push(o)),I.$set(n),(!pt||4&e)&&p(q,"placeholder",t[2]),2&e&&q.value!==t[1]&&g(q,t[1]),(!pt||8&e)&&p(K,"placeholder",t[3]),16&e&&g(K,t[4]),64&e&&(tt.checked=t[6]),"success"===t[7]?$t||($t=rt(),$t.c(),$t.m(x,dt)):$t&&($t.d(1),$t=null),"error"===t[7]?xt?xt.p(t,e):(xt=lt(t),xt.c(),xt.m(x,mt)):xt&&(xt.d(1),xt=null),"success"!==t[7]?wt?wt.p(t,e):(wt=ct(t),wt.c(),wt.m(x,null)):wt&&(wt.d(1),wt=null)},i(t){pt||(P(I.$$.fragment,t),pt=!0)},o(t){S(I.$$.fragment,t),pt=!1},d(t){t&&l(e),t&&l(b),t&&l(k),t&&l(y),t&&l(x),bt&&bt.d(),N(I),$t&&$t.d(),xt&&xt.d(),wt&&wt.d(),ht=!1,o(gt)}}}function ft(t,e,n){let{api:o}=e,{configuration:s}=e,a="",i="",r="",l="",c="",u="",f=!1,d="",m="",p=[],h=!1;async function g(){const t=await async function(){const t=await V().tabs.query({active:!0,currentWindow:!0}),e=t&&t[0];return{url:e?e.url:"",title:e?e.title:""}}();n(0,a=t.url),n(5,u=s.default_tags);const e=await o.getTags().catch((()=>[]));n(9,p=e.map((t=>t.name))),async function(){const t=await st(a);if(!t)return;n(2,r=t.metadata.title),n(3,l=t.metadata.description);const e=t.bookmark;e&&(n(10,h=!0),n(1,i=e.title),n(5,u=e.tag_names?e.tag_names.join(" "):""),n(4,c=e.description),n(6,f=e.unread))}()}return t.$$set=t=>{"api"in t&&n(13,o=t.api),"configuration"in t&&n(14,s=t.configuration)},t.$$.update=()=>{24576&t.$$.dirty&&o&&s&&g()},[a,i,r,l,c,u,f,d,m,p,h,async function(){const t=u.split(" ").map((t=>t.trim())).filter((t=>!!t)),e={url:a,title:i,description:c,tag_names:t,unread:f};try{n(7,d="loading"),await o.saveBookmark(e),await async function(){await at(null)}(),n(7,d="success")}catch(t){n(7,d="error"),n(8,m=t.toString()),console.error(m)}},function(){Q()},o,s,function(){a=this.value,n(0,a)},function(t){u=t,n(5,u)},function(){i=this.value,n(1,i)},function(){c=this.value,n(4,c)},function(){f=this.checked,n(6,f)}]}class dt extends H{constructor(t){var e;super(),document.getElementById("svelte-af5t2e-style")||((e=c("style")).id="svelte-af5t2e-style",e.textContent="form.svelte-af5t2e.svelte-af5t2e{max-width:400px}.title-row.svelte-af5t2e.svelte-af5t2e{display:flex;justify-content:space-between;align-items:baseline}.button-row.svelte-af5t2e.svelte-af5t2e{display:flex;justify-content:flex-end}.button-row.svelte-af5t2e button.svelte-af5t2e{padding-left:32px;padding-right:32px}.result-row.svelte-af5t2e.svelte-af5t2e{display:flex;justify-content:center}.bookmark-exists.svelte-af5t2e.svelte-af5t2e{color:#ffb700}",i(document.head,e)),R(this,t,ft,ut,a,{api:13,configuration:14})}}function mt(e){let n,o,s,a,u,m,h,g,v,b;return{c(){var t,e,i;n=c("h6"),n.textContent="Welcome",o=f(),s=c("div"),a=f(),u=c("p"),u.innerHTML='This is a companion extension for the <a href="https://github.com/sissbruecker/linkding">linkding</a> bookmark\n  service. Before you can start using it you have to configure some basic settings, so that the extension can\n  communicate with your linkding installation.',m=f(),h=c("div"),g=c("button"),g.textContent="Get started",p(s,"class","divider"),p(g,"type","submit"),p(g,"class","btn btn-primary"),t="text-align",e="center",h.style.setProperty(t,e,i?"important":"")},m(t,l){r(t,n,l),r(t,o,l),r(t,s,l),r(t,a,l),r(t,u,l),r(t,m,l),r(t,h,l),i(h,g),v||(b=d(g,"click",e[0]),v=!0)},p:t,i:t,o:t,d(t){t&&l(n),t&&l(o),t&&l(s),t&&l(a),t&&l(u),t&&l(m),t&&l(h),v=!1,b()}}}function pt(t){return[function(){Q()}]}class ht extends H{constructor(t){super(),R(this,t,pt,mt,a,{})}}function gt(t){let e,n,o,s,a,u,d,m;return d=new ht({}),{c(){e=c("div"),n=c("div"),o=f(),s=c("div"),a=c("div"),u=c("div"),O(d.$$.fragment),p(n,"class","modal-overlay"),p(u,"class","content"),p(a,"class","modal-body"),p(s,"class","modal-container"),p(e,"class","modal active"),p(e,"id","modal-id")},m(t,l){r(t,e,l),i(e,n),i(e,o),i(e,s),i(s,a),i(a,u),M(d,u,null),m=!0},i(t){m||(P(d.$$.fragment,t),m=!0)},o(t){S(d.$$.fragment,t),m=!1},d(t){t&&l(e),N(d)}}}function vt(t){let e,n,s,a;e=new dt({props:{configuration:t[1],api:t[2]}});let i=!t[0]&&gt();return{c(){O(e.$$.fragment),n=f(),i&&i.c(),s=u("")},m(t,o){M(e,t,o),r(t,n,o),i&&i.m(t,o),r(t,s,o),a=!0},p(t,[n]){const a={};2&n&&(a.configuration=t[1]),4&n&&(a.api=t[2]),e.$set(a),t[0]?i&&(B={r:0,c:[],p:B},S(i,1,1,(()=>{i=null})),B.r||o(B.c),B=B.p):i?1&n&&P(i,1):(i=gt(),i.c(),P(i,1),i.m(s.parentNode,s))},i(t){a||(P(e.$$.fragment,t),P(i),a=!0)},o(t){S(e.$$.fragment,t),S(i),a=!1},d(t){N(e,t),t&&l(n),i&&i.d(t),t&&l(s)}}}function bt(t,e,n){let o,s,a=!0;return async function(){n(1,o=await tt()),n(0,a=et(o)),a&&n(2,s=new nt(o))}(),[a,o,s]}function kt(t){let e;return{c(){e=c("div"),e.innerHTML='<span class="form-input-hint"><i class="icon icon-check"></i> Connection successful</span>',p(e,"class","form-group has-success mr-2")},m(t,n){r(t,e,n)},d(t){t&&l(e)}}}function yt(t){let e;return{c(){e=c("div"),e.innerHTML='<span class="form-input-hint"><i class="icon icon-cross"></i> Connection failed</span>',p(e,"class","form-group has-error mr-2")},m(t,n){r(t,e,n)},d(t){t&&l(e)}}}function $t(e){let n,s,a,h,v,b,k,y,$,x,w,T,C,_,j,U,A,E,L,B,P,S,O,M,N,I,R,H,z,D,J,q,W,G,V,Y,F,K,Q=e[3]&&kt(),X=e[4]&&yt();return{c(){n=c("h6"),n.textContent="Configuration",s=f(),a=c("div"),h=f(),v=c("p"),v.innerHTML='This is a companion extension for the <a href="https://github.com/sissbruecker/linkding">linkding</a> bookmark\n  service. Before you can start using it you have to configure some basic settings, so that the extension can\n  communicate with your linkding installation.',b=f(),k=c("form"),y=c("div"),$=c("label"),$.innerHTML='Base URL <span class="text-error">*</span>',x=f(),w=c("input"),T=f(),C=c("div"),C.innerHTML="The base URL of your linkding installation, <b>without</b> the <samp>/bookmark</samp>\n      path or a trailing slash",_=f(),j=c("div"),U=c("label"),U.innerHTML='API Authentication Token <span class="text-error">*</span>',A=f(),E=c("input"),L=f(),B=c("div"),B.textContent="Used to authenticate against the linkding API. You can find this on your linkding\n      settings page.",P=f(),S=c("div"),O=c("label"),O.textContent="Default Tags",M=f(),N=c("input"),I=f(),R=c("div"),R.textContent="Set of tags that should be added to new bookmarks by default.",H=f(),z=c("div"),D=f(),J=c("div"),Q&&Q.c(),q=f(),X&&X.c(),W=f(),G=c("button"),V=u("Save"),p(a,"class","divider"),p($,"class","form-label"),p($,"for","input-base-url"),p(w,"class","form-input"),p(w,"type","text"),p(w,"id","input-base-url"),p(w,"placeholder","https://linkding.mydomain.com"),p(C,"class","form-input-hint"),p(y,"class","form-group"),p(U,"class","form-label"),p(U,"for","input-token"),p(E,"class","form-input"),p(E,"type","password"),p(E,"id","input-token"),p(E,"placeholder","Token"),p(B,"class","form-input-hint"),p(j,"class","form-group"),p(O,"class","form-label"),p(O,"for","input-default-tags"),p(N,"class","form-input"),p(N,"type","text"),p(N,"id","input-default-tags"),p(N,"placeholder",""),p(R,"class","form-input-hint"),p(S,"class","form-group"),p(z,"class","divider"),p(G,"type","submit"),p(G,"class","btn btn-primary ml-2 svelte-n84dha"),G.disabled=Y=!(e[0]&&e[1]),p(J,"class","button-row svelte-n84dha"),p(k,"class","form")},m(t,o){r(t,n,o),r(t,s,o),r(t,a,o),r(t,h,o),r(t,v,o),r(t,b,o),r(t,k,o),i(k,y),i(y,$),i(y,x),i(y,w),g(w,e[0]),i(y,T),i(y,C),i(k,_),i(k,j),i(j,U),i(j,A),i(j,E),g(E,e[1]),i(j,L),i(j,B),i(k,P),i(k,S),i(S,O),i(S,M),i(S,N),g(N,e[2]),i(S,I),i(S,R),i(k,H),i(k,z),i(k,D),i(k,J),Q&&Q.m(J,null),i(J,q),X&&X.m(J,null),i(J,W),i(J,G),i(G,V),F||(K=[d(w,"input",e[6]),d(E,"input",e[7]),d(N,"input",e[8]),d(k,"submit",m(e[5]))],F=!0)},p(t,[e]){1&e&&w.value!==t[0]&&g(w,t[0]),2&e&&E.value!==t[1]&&g(E,t[1]),4&e&&N.value!==t[2]&&g(N,t[2]),t[3]?Q||(Q=kt(),Q.c(),Q.m(J,q)):Q&&(Q.d(1),Q=null),t[4]?X||(X=yt(),X.c(),X.m(J,W)):X&&(X.d(1),X=null),3&e&&Y!==(Y=!(t[0]&&t[1]))&&(G.disabled=Y)},i:t,o:t,d(t){t&&l(n),t&&l(s),t&&l(a),t&&l(h),t&&l(v),t&&l(b),t&&l(k),Q&&Q.d(),X&&X.d(),F=!1,o(K)}}}function xt(t,e,n){let o="",s="",a="",i=!1,r=!1;return async function(){const t=await tt();n(0,o=t.baseUrl),n(1,s=t.token),n(2,a=t.default_tags)}(),[o,s,a,i,r,async function(){const t={baseUrl:o,token:s,default_tags:a};await new nt(t).testConnection(t)?(await async function(t){const e=JSON.stringify(t);await K(X,e)}(t),n(4,r=!1),n(3,i=!0)):(n(3,i=!1),n(4,r=!0))},function(){o=this.value,n(0,o)},function(){s=this.value,n(1,s)},function(){a=this.value,n(2,a)}]}return{Popup:class extends H{constructor(t){super(),R(this,t,bt,vt,a,{})}},Options:class extends H{constructor(t){var e;super(),document.getElementById("svelte-n84dha-style")||((e=c("style")).id="svelte-n84dha-style",e.textContent=".button-row.svelte-n84dha.svelte-n84dha{display:flex;justify-content:flex-end;align-items:baseline}.button-row.svelte-n84dha button.svelte-n84dha{padding-left:32px;padding-right:32px}",i(document.head,e)),R(this,t,xt,$t,a,{})}}}}();
//# sourceMappingURL=bundle.js.map
